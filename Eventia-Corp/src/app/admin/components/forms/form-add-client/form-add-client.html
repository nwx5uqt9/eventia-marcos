<form>
  <!-- Mensajes de estado -->
  <div *ngIf="mensaje" class="alert alert-success alert-dismissible fade show" role="alert">
    {{ mensaje }}
    <button type="button" class="btn-close" (click)="mensaje = ''"></button>
  </div>

  <div *ngIf="mensajeError" class="alert alert-danger alert-dismissible fade show" role="alert">
    {{ mensajeError }}
    <button type="button" class="btn-close" (click)="mensajeError = ''"></button>
  </div>

  <div class="mb-3">
    <label for="nombre" class="form-label">Nombre</label>
    <input [(ngModel)]="nombre" name="nombre" type="text" class="form-control" id="nombre" placeholder="Ingresa tu nombre" required>
  </div>

  <div class="mb-3">
    <label for="apellidos" class="form-label">Apellidos</label>
    <input [(ngModel)]="apellidos" name="apellidos" type="text" class="form-control" id="apellidos" placeholder="Ingresa tus apellidos">
  </div>

  <div class="mb-3">
    <label for="nombreusuario" class="form-label">Nombre de Usuario</label>
    <input [(ngModel)]="nombreusuario" name="nombreusuario" type="text" class="form-control" id="nombreusuario" placeholder="Ingresa tu usuario">
  </div>

  <div class="mb-3">
    <label for="password" class="form-label">Contraseña</label>
    <input [(ngModel)]="password" name="password" type="password" class="form-control" id="password" placeholder="Ingresa tu contraseña">
  </div>

  <div class="mb-3">
    <label for="dni" class="form-label">DNI</label>
    <input [(ngModel)]="dni" name="dni" type="text" class="form-control" id="dni" placeholder="Ingresa tu DNI">
  </div>

  <div class="mb-3">
    <label for="edad" class="form-label">Edad</label>
    <input [(ngModel)]="edad" name="edad" type="number" class="form-control" id="edad" placeholder="Ingresa tu edad">
  </div>

  <div class="mb-3">
    <label for="sexo" class="form-label">Sexo</label>
    <select [(ngModel)]="sexo" name="sexo" class="form-select" id="sexo">
      <option value="">Selecciona...</option>
      <option value="M">Masculino</option>
      <option value="F">Femenino</option>
    </select>
  </div>

  <div class="mb-3">
    <label for="email" class="form-label">Correo</label>
    <input [(ngModel)]="email" name="email" type="email" class="form-control" id="email" placeholder="Ingresa tu correo">
  </div>

  <div class="mb-3">
    <label for="telefono" class="form-label">Teléfono</label>
    <input [(ngModel)]="telefono" name="telefono" type="tel" class="form-control" id="telefono" placeholder="Ingresa tu teléfono">
  </div>

  <div class="mb-3">
    <label for="direccion" class="form-label">Dirección</label>
    <input [(ngModel)]="direccion" name="direccion" type="text" class="form-control" id="direccion" placeholder="Ingresa tu dirección">
  </div>

  <div class="mb-3">
    <label for="rol" class="form-label">
      Rol <span class="text-danger">*</span>
    </label>

    <select [(ngModel)]="rolIdSeleccionado" name="rol" class="form-select" id="rol" required>
      <option [ngValue]="null">Selecciona un rol...</option>

      @for (rol of roles; track rol.id) {
        <option [ngValue]="rol.id">{{ rol.rol }} - {{ rol.descripcion }}</option>
      }
    </select>

    @if (roles.length === 0) {
      <small class="form-text text-muted">
        No hay roles disponibles. Verifica que el backend esté corriendo y los roles estén en la BD.
      </small>
    }

    @if (rolIdSeleccionado) {
      <small class="form-text text-success">
        Rol seleccionado ID: {{ rolIdSeleccionado }}
      </small>
    }
  </div>


  <button type="button" class="btn btn-primary" (click)="agregarUsuario()" [disabled]="roles.length === 0">
    {{ isEditMode ? 'Actualizar Cliente' : 'Registrar Cliente' }}
  </button>

</form>
