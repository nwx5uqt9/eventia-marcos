<form [formGroup]="eventoForm" (ngSubmit)="guardar()">
  @if (error()) {
  <div class="alert alert-danger" role="alert">
    {{ error() }}
  </div>
  }

  <div class="mb-3">
    <label class="form-label">Nombre *</label>
    <input class="form-control" formControlName="nombre" type="text" placeholder="Nombre del evento" />
    @if (eventoForm.get('nombre')?.invalid && eventoForm.get('nombre')?.touched) {
    <small class="text-danger">El nombre es requerido</small>
    }
  </div>

  <div class="mb-3">
    <label class="form-label">Descripci贸n</label>
    <textarea class="form-control" formControlName="descripcion" rows="3" placeholder="Descripci贸n del evento"></textarea>
  </div>

  <div class="mb-3">
    <label class="form-label">Fecha y Hora *</label>
    <input class="form-control" formControlName="fechaHora" type="datetime-local" />
    @if (eventoForm.get('fechaHora')?.invalid && eventoForm.get('fechaHora')?.touched) {
    <small class="text-danger">La fecha y hora son requeridas</small>
    }
  </div>

  <div class="mb-3">
    <label class="form-label">Tipo de Evento *</label>
    <select class="form-select" formControlName="tipoEvento">
      <option value="">Seleccione un tipo...</option>
      @for (tipo of tiposEvento(); track tipo.id) {
      <option [value]="tipo.id">{{ tipo.nombre }}</option>
      }
    </select>
    @if (eventoForm.get('tipoEvento')?.invalid && eventoForm.get('tipoEvento')?.touched) {
    <small class="text-danger">El tipo de evento es requerido</small>
    }
  </div>

  <div class="mb-3">
    <label class="form-label">Organizador *</label>
    <select class="form-select" formControlName="organizador">
      <option value="">Seleccione un organizador...</option>
      @for (org of organizadores(); track org.id) {
      <option [value]="org.id">{{ org.nombreEmpresa }}</option>
      }
    </select>
    @if (eventoForm.get('organizador')?.invalid && eventoForm.get('organizador')?.touched) {
    <small class="text-danger">El organizador es requerido</small>
    }
  </div>

  <div class="mb-3">
    <label class="form-label">Estado *</label>
    <select class="form-select" formControlName="estadoEvento">
      <option value="">Seleccione un estado...</option>
      @for (estado of estadosEvento(); track estado.id) {
      <option [value]="estado.id">{{ estado.nombre }}</option>
      }
    </select>
    @if (eventoForm.get('estadoEvento')?.invalid && eventoForm.get('estadoEvento')?.touched) {
    <small class="text-danger">El estado del evento es requerido</small>
    }
  </div>

  <div class="mb-3">
    <label class="form-label">Ubicaci贸n *</label>
    <input
      class="form-control"
      formControlName="ubicacion"
      type="text"
      placeholder="Ej: Estadio Nacional, Auditorio Municipal, etc."
    />
    @if (eventoForm.get('ubicacion')?.invalid && eventoForm.get('ubicacion')?.touched) {
    <small class="text-danger">La ubicaci贸n es requerida</small>
    }
  </div>

  <div class="mb-3">
    <label class="form-label">Precio (S/) *</label>
    <input
      class="form-control"
      formControlName="precio"
      type="number"
      step="0.01"
      min="0"
      placeholder="Ej: 50.00"
    />
    @if (eventoForm.get('precio')?.invalid && eventoForm.get('precio')?.touched) {
    <small class="text-danger">El precio es requerido y debe ser mayor o igual a 0</small>
    }
  </div>

  <div class="d-flex justify-content-end gap-2 mt-4">
    <button type="button" class="btn btn-outline-secondary" (click)="closeModal()">Cerrar</button>
    <button type="submit" class="btn btn-success" [disabled]="loading()">
      @if (loading()) {
      <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
      Guardando...
      } @else {
      Guardar Evento
      }
    </button>
  </div>
</form>
