<div class="container-fluid p-4">
  <!-- Header Section -->
  <div class="row mb-4">
    <div class="col-12">
      <h2 class="text-dark fw-bold mb-2">
        <i class="bi bi-calendar-event me-2 text-warning"></i>
        Eventos Disponibles
      </h2>
      <p class="text-muted fs-6">Explora y reserva tus entradas para los mejores eventos</p>
    </div>
  </div>

  <!-- Section Filter -->
  <form class="row g-3 mb-4 bg-white p-4 rounded-3 shadow-sm">
    <div class="col-12 col-md-5">
      <label class="form-label fw-semibold text-dark" for="search">
        <i class="bi bi-search me-1"></i>Buscar Evento
      </label>
      <div class="input-group input-group-lg">
        <input
          type="text"
          name="search"
          class="form-control border-2"
          [(ngModel)]="searchTerm"
          placeholder="Nombre del evento, artista, etc."
        />
        <button class="btn btn-warning text-dark fw-semibold" type="button" (click)="buscarEventos()">
          <i class="bi bi-search"></i> Buscar
        </button>
      </div>
    </div>
    <div class="col-12 col-md-3">
      <label class="form-label fw-semibold text-dark" for="estado">
        <i class="bi bi-tag me-1"></i>Categoría
      </label>
      <select
        id="estado"
        class="form-select form-select-lg border-2"
        [(ngModel)]="selectedEstado"
        name="estado">
        <option value="" selected>Todas las categorías</option>
        <option value="concierto">Conciertos</option>
        <option value="deportes">Deportes</option>
        <option value="teatro">Teatro</option>
        <option value="conferencia">Conferencias</option>
      </select>
    </div>
    <div class="col-12 col-md-4">
      <label class="form-label fw-semibold text-dark" for="ubicacion">
        <i class="bi bi-geo-alt me-1"></i>Ubicación
      </label>
      <select
        id="ubicacion"
        class="form-select form-select-lg border-2"
        [(ngModel)]="selectedUbicacion"
        name="ubicacion">
        <option value="" selected>Todas las ubicaciones</option>
        <option value="lima">Lima</option>
        <option value="arequipa">Arequipa</option>
        <option value="cusco">Cusco</option>
        <option value="trujillo">Trujillo</option>
      </select>
    </div>
  </form>

  <!-- Section Content -->
  <div class="row">
    <div class="col-12">
      @if (eventos().length > 0) {
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4 mb-5">
          @for (evento of eventos(); track evento.id) {
            <div class="col">
              <app-card
                [title]="evento.nombre"
                [description]="evento.descripcion"
                imageUrl="img/micro-eventos.png"
                buttonText="Comprar"
                buttonClass="btn-warning text-dark fw-bold"
                (onButtonClick)="abrirModalCompra(evento)"
                class="h-100"
              >
              </app-card>
            </div>
          }
        </div>
      } @else {
        <div class="alert alert-warning alert-dismissible fade show text-center py-5 shadow-sm" role="alert">
          <i class="bi bi-calendar-x fs-1 d-block mb-3 text-warning"></i>
          <h4 class="alert-heading fw-bold">No hay eventos disponibles</h4>
          <p class="mb-0">Vuelve pronto para ver nuevos eventos emocionantes</p>
        </div>
      }
    </div>
  </div>

  <!-- Modal de Compra -->
  @if (mostrarModal()) {
    <app-modal-compra
      [evento]="eventoSeleccionado"
      (onClose)="cerrarModal()"
      (onConfirm)="confirmarCompra($event)"
    ></app-modal-compra>
  }
</div>
